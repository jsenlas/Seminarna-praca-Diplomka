\chapter{Installing dependencies}\label{atach:dependencies}

Using a virtual environment is suggested and installing all dependencies in the environment.

\begin{verbatim}
    python3 -m venv env
    source env/bin/activate
    pip3 install -r requirements
\end{verbatim}

\section{Optasense visualizer application usage}\label{usage}

To run the application it is necessary to have an environment set up and all dependencies installed.
\textit{} \newline
Run the server part of the application:
\begin{verbatim}
    python3 app.py
\end{verbatim}

\textit{} \newline
The application usage:

\begin{verbatim}
usage: app.py [-h] [--port PORT]

DAS file visualization software. Server application.

options:
  -h, --help   show this help message and exit
  --port PORT  Port number for websocket.
\end{verbatim}


\section{Svelte}\label{attach:svelte}
\textit{} \newline
To create a Svelte application from template:

\begin{verbatim}
    npm create svelte@latest myapp
\end{verbatim}

Run the client on the localhost:

\begin{verbatim}
    npm run dev
\end{verbatim}

To run a build call:

\begin{verbatim}
    npm run build
\end{verbatim}

The output will be saved in \textit{/dist} folder. To run the application from there, run Python script in the project's client folder:

\begin{verbatim}
    python3 server.py
\end{verbatim}

Server created this way is a simple Flask server.

\chapter{OptaSense DAS system measurement\newline properties}\label{attach:properties}

\begin{table}[h]
    \centering
    \begin{tabular}{|c|c|}
    \hline
        \textbf{Property} & \textbf{Value} \\ \hline
    \multicolumn{2}{|c|}{\textbf{/Acquisition}} \\ \hline
        MaximumFrequency & 16000 \\ \hline
        MinimumFrequency & 0 \\ \hline
        NumberOfLoci & 100 \\ \hline
        PulseRate & \qty{32}{} \\ \hline
        PulseWidth & \qty{20}{\ns} \\ \hline
        SpatialSamplingInterval & \qty{1.02095}{\meter} \\ \hline
        StartLocusIndex & 600 \\ \hline
    \multicolumn{2}{|c|}{\textbf{/Acquisition/Custom}} \\ \hline
        Data Width (Bits) & 16 bits \\ \hline
        FPGA infromation & Type and settings \\ \hline
        FPGA Drawing Number & 4802701 \\ \hline
        FPGA Version & 1.2 \\ \hline
        Fibre Refractive Index & 1.468199968338 \\ \hline
        GPS Enabled & True \\ \hline
        Laser Wavelength (nm) & 1550 \\ \hline
        Num Output Channels & 100 \\ \hline
        Ping Period (CSU) & 3125 \\ \hline
        Pulse Width (CSU) & 2 \\ \hline
        Sequencer Clock (MHz) & 100 MHz \\ \hline
        Sequencer Mode & 1 \\ \hline
    \multicolumn{2}{|c|}{\textbf{/Acquisition/Raw[0]}} \\ \hline
        OutputDataRate & 32000  \\ \hline
        NumberOfLoci & 100  \\ \hline
        RawDescription & Single Pulse, SR: 1.5, OCP: 1  \\ \hline
        StartLocusIndex & 600  \\ \hline

    \end{tabular}
    \caption{HDF5 groups and their attributes from the data file.}
    \label{tab:file_details}
\end{table}
\begin{table}[]
    \centering
    \begin{tabular}{|c|c|}
    \hline
    \textbf{Property} & \textbf{Value} \\ \hline
        
    \multicolumn{2}{|c|}{\textbf{/Acquisition/Raw[0]/Custom/SampleCount}} \\ \hline
        Filters & shuffle and deflate \\ \hline
        maximum dimensions & 6451612 \\ \hline
        shape (number of samples) & 332032 \\ \hline
        type & \makecell{64-bit integer} \\ \hline
        
    \multicolumn{2}{|c|}{\textbf{/Acquisition/Raw[0]/RawData}} \\ \hline
        \makecell{Count \\ number of all values} & 33203200 \\ \hline
        Start time & 2021-08-31T16:22:39.739250Z \\ \hline
        End time & 2021-08-31T16:22:50.115218Z \\ \hline
        Filters & shuffle and deflate \\ \hline
        type & \makecell{64-bit integer} \\ \hline
        Shape & \makecell{100 channels \\ 332032 samples } \\ \hline
    \multicolumn{2}{|c|}{\textbf{/Acquisition/Raw[0]/RawDataTime}} \\ \hline
        Start time & 2021-08-31T16:22:39.739250Z \\ \hline
        End time & 2021-08-31T16:22:50.115218Z \\ \hline
        Filters & shuffle and deflate \\ \hline
        start index & 0 \\ \hline
        shape & 332032 \\ \hline
        type & \makecell{64-bit integer} \\
    \hline
    \end{tabular}
    \caption{HDF5 groups and their attributes from the data file.}
    \label{tab:file_details1}
\end{table}



\begin{table}[]
    \centering
    \begin{tabular}{|c|c|}
    \hline
    \textbf{Property} & \textbf{Value} \\ \hline
        
    \multicolumn{2}{|c|}{\textbf{/Acquisition}} \\ \hline
		MaximumFrequency & 10000.0 \\ \hline
		MinimumFrequency & 0.0 \\ \hline
		NumberOfLoci & 1700 \\ \hline
		PulseRate & 20000.0 \\ \hline
		PulseWidth & 20.0 \\ \hline
		PulseWidthUnit & ns \\ \hline
		SpatialSamplingInterval & 1.0209523 \\ \hline
		SpatialSamplingIntervalUnit & m \\ \hline
		StartLocusIndex & 0 \\ \hline
		TriggeredMeasurement & false \\ \hline
		VendorCode & \makecell{OptaSense IU Setup 1.8.6 \\ c9c23ad2ab20eb82641984e0e1205500228e9fba} \\ \hline
		schemaVersion & 2.0 \\ \hline
		uuid & bb17e24c-0c96-44d0-b4b0-a25a72db10e2 \\ \hline
        Filters & shuffle and deflate \\ \hline
        maximum dimensions & 6451612 \\ \hline
        shape (number of samples) & 332032 \\ \hline
        type & \makecell{64-bit integer} \\ \hline
    \multicolumn{2}{|c|}{\textbf{/Acquisition/Raw[0]}} \\ \hline
        \makecell{Count \\ number of all values} & 33203200 \\ \hline
		% Custom & <HDF5 group "/Acquisition/Raw[0]/Custom" (4 members)> \\ \hline
		% RawData & <HDF5 dataset "RawData": shape (1140000, 1700), type "<i2"> \\ \hline
		% RawDataTime & <HDF5 dataset "RawDataTime": shape (1140000,), type "<i8"> \\ \hline
		NumberOfLoci & 1700 \\ \hline
		OutputDataRate & 20000.0 \\ \hline
		RawDescription & b'Single Pulse, SR: 1.5, OCP: 1' \\ \hline
		StartLocusIndex & 0 \\ \hline
		uuid & b'34baa19e-cdde-48d7-8430-fbc9eb2187e6' \\ \hline
    \multicolumn{2}{|c|}{\textbf{/Acquisition/Raw[0]/RawData}} \\ \hline
		Count & 1938000000  \\ \hline
		Dimensions & array([time, locus], dtype='|S6')  \\ \hline
		PartEndTime & 2023-04-17T11:25:10.456750Z  \\ \hline
		PartStartTime & 2023-04-17T11:24:13.456800Z  \\ \hline
		StartIndex & 0  \\ \hline
    \hline
    \end{tabular}
    \caption{HDF5 groups and their attributes from the running data file.}
    \label{tab:filerunning}
\end{table}

\chapter{Printing the HDF5 data structure and metadata}

\begin{verbatim}
    h5dump -n running_2023-04-17T122413+0100.h5

    HDF5 "running_2023-04-17T122413+0100.h5" {
        FILE_CONTENTS {
         group      /
         group      /Acquisition
         group      /Acquisition/Custom
         group      /Acquisition/Raw[0]
         group      /Acquisition/Raw[0]/Custom
         dataset    /Acquisition/Raw[0]/Custom/GpBits
         dataset    /Acquisition/Raw[0]/Custom/GpsStatus
         dataset    /Acquisition/Raw[0]/Custom/PpsOffset
         dataset    /Acquisition/Raw[0]/Custom/SampleCount
         dataset    /Acquisition/Raw[0]/RawData
         dataset    /Acquisition/Raw[0]/RawDataTime
      }
    }


    
\end{verbatim}






% \section{Příkazy pro sazbu veličin a jednotek}

% \begin{table}[!h]
%   \caption[Přehled příkazů]{Přehled příkazů pro matematické prostředí }
%   \begin{center}
%   	\small
% 	  \begin{tabular}{|c|c|c|c|}
% 	    \hline
% 	    Příkaz    						& Příklad 					& Zdroj příkladu  							& Význam  \\
% 	    \hline\hline
% 	    \verb|\textind{...}|	& $\beta_\textind{max}$ 	& \verb|$\beta_\textind{max}$|	& textový index \\
% 	    \hline
% 	    \verb|\const{...}| 		& $\const{U}_\textind{in}$ 				& \verb|$\const{U}_\textind{in}$|		& konstantní veličina \\
% 	    \hline
% 	    \verb|\var{...}| 		& $\var{u}_\textind{in}$ & \verb|$\var{u}_\textind{in}$| & proměnná veličina \\
% 	    \hline
% 	    \verb|\complex{...}| 	& $\complex{u}_\textind{in}$ & \verb|$\complex{u}_\textind{in}$| & komplexní veličina \\
% 	    \hline
% 	    \verb|\vect{...}| 		& $\vect{y}$ 						& \verb|$\vect{y}$| & vektor \\
% 	    \hline
% 	    \verb|\mat{...}| 	& $\mat{Z}$ 						& \verb|$\mat{Z}$| & matice \\
% 	    \hline
% 	    \verb|\unit{...}| 		& $\unit{kV}$ 						& \verb|$\unit{kV}$|\quad či\ \, \verb|\unit{kV}| & jednotka \\
% 	    \hline
% 	  \end{tabular}
%   \end{center}
% \end{table}



% %\newpage
% \section{Příkazy pro sazbu symbolů}

% \begin{itemize}
%   \item
%     \verb|\E|, \verb|\eul| -- sazba Eulerova čísla: $\eul$,
%   \item
%     \verb|\J|, \verb|\jmag|, \verb|\I|, \verb|\imag| -- sazba imaginární jednotky: $\jmag$, $\imag$,
%   \item
%     \verb|\dif| -- sazba diferenciálu: $\dif$,
%   \item
%     \verb|\sinc| -- sazba funkce: $\sinc$,
%   \item
%     \verb|\mikro| -- sazba symbolu mikro stojatým písmem%
% 			\footnote{znak pochází z~balíčku \texttt{textcomp}}: $\mikro$,
% 	\item
% 		\verb|\uppi| -- sazba symbolu $\uppi$
% 			(stojaté řecké pí, na rozdíl od \verb|\pi|, což sází $\pi$).
% \end{itemize}
% %
% Všechny symboly jsou určeny pro matematický mód, vyjma \verb|\mikro|, jenž je\\ použitelný rovněž v~textovém módu.
% %$\upmikro$


% \chapter{Druhá příloha}

% \begin{figure}[!h]
%   \begin{center}
%     \includegraphics[scale=0.5]{obrazky/ZlepseneWilsonovoZrcadloNPN}
%   \end{center}
%   \caption[Alenčino zrcadlo]{Zlepšené Wilsonovo proudové zrcadlo.}
% \end{figure}

% Pro sazbu vektorových obrázků přímo v~\LaTeX{}u je možné doporučit balíček \href{https://www.ctan.org/pkg/pgf}{\texttt{TikZ}}.
% Příklady sazby je možné najít na \href{http://www.texample.net/tikz/examples/}{\TeX{}ample}.
% Pro vyzkoušení je možné použít programy QTikz nebo TikzEdt.




% \chapter{Příklad sazby zdrojových kódů}

% \section{Balíček \texttt{listings}}

% Pro vysázení zdrojových souborů je možné použít balíček \href{https://www.ctan.org/pkg/listings}{\texttt{listings}}.
% Balíček zavádí nové prostředí \texttt{lstlisting} pro sazbu zdrojových kódů, jako například:
% %
% \begin{lstlisting}[language={[LaTeX]TeX}]
% \section{Balíček lstlistings}
% Pro vysázení zdrojových souborů je možné použít
% 	balíček \href{https://www.ctan.org/pkg/listings}%
% 	{\texttt{listings}}.
% Balíček zavádí nové prostředí \texttt{lstlisting} pro
% 	sazbu zdrojových kódů.
% \end{lstlisting}
% %
% Podporuje množství programovacích jazyků.
% Kód k~vysázení může být načítán přímo ze zdrojových souborů.
% Umožňuje vkládat čísla řádků nebo vypisovat jen vybrané úseky kódu.
% Např.:

% \noindent
% Zkratky jsou sázeny v~prostředí \texttt{acronym}:
% \label{lst:zkratky}
% \lstinputlisting[language={[LaTeX]TeX},nolol,numbers=left, firstnumber=6, firstline=6,lastline=6]{text/zkratky.tex}
% %
% Šířka textu volitelného parametru \verb|KolikMista| udává šířku prvního sloupce se zkratkami.
% Proto by měla být zadávána nejdelší zkratka nebo symbol.
% Příklad definice zkratky \acs{symfvz} je na výpisu \ref{lst:symfvz}.

% \shorthandoff{-}
% \lstinputlisting[language={[LaTeX]TeX},frame=single,caption={Ukázka sazby zkratek},label=lst:symfvz,numbers=left,linerange={bsymfvz-\%\%\%\ esymfvz},includerangemarker=false]{text/zkratky.tex}
% \shorthandon{-}

% \noindent
% Ukončení seznamu je provedeno ukončením prostředí:
% \lstinputlisting[language={[LaTeX]TeX},nolol,numbers=left,firstnumber=26,linerange=26]{text/zkratky.tex}

% \vspace{\fill}

% \noindent
% {\bf Poznámka k~výpisům s~použitím volby jazyka \verb|czech| nebo \verb|slovak|:}\newline
% Pokud Váš zdrojový kód obsahuje znak spojovníku \verb|-|, pak překlad může skončit chybou.
% Ta je způsobená tím, že znak \verb|-| je v~českém nebo slovenském nastavení balíčku \verb|babel| tzv.\ aktivním znakem.
% Přepněte znak \verb|-| na neaktivní příkazem \verb|\shorthandoff{-}| těsně před výpisem a hned za ním jej vraťte na aktivní příkazem \verb|\shorthandon{-}|.
% Podobně jako to je ukázáno ve zdrojovém kódu šablony.


% \clearpage

% %\section{Výpis kódu prostředí Matlab}
% Na výpisu \ref{lst:priklad.vypis.kodu.Matlab} naleznete příklad kódu pro Matlab, na výpisu \ref{lst:priklad.vypis.kodu.C} zase pro jazyk~C.

% \lstnewenvironment{matlab}[1][]{%
% \iflanguage{czech}{\shorthandoff{-}}{}%
% \iflanguage{slovak}{\shorthandoff{-}}{}%
% \lstset{language=Matlab,numbers=left,#1}%
% }{%
% \iflanguage{slovak}{\shorthandon{-}}{}%
% \iflanguage{czech}{\shorthandon{-}}{}%
% }

% \begin{matlab}[frame=single,float=htbp,caption={Příklad Schur-Cohnova testu stability v~prostředí Matlab.},label=lst:priklad.vypis.kodu.Matlab,numberstyle=\scriptsize, numbersep=7pt]
% %% Priklad testovani stability filtru

% % koeficienty polynomu ve jmenovateli
% a = [ 5, 11.2, 5.44, -0.384, -2.3552, -1.2288];
% disp( 'Polynom:'); disp(poly2str( a, 'z'))

% disp('Kontrola pomoci korenu polynomu:');
% zx = roots( a);
% if( all( abs( zx) < 1))
%     disp('System je stabilni')
% else
%     disp('System je nestabilni nebo na mezi stability');
% end

% disp(' '); disp('Kontrola pomoci Schur-Cohn:');
% ma = zeros( length(a)-1,length(a));
% ma(1,:) = a/a(1);
% for( k = 1:length(a)-2)
%     aa = ma(k,1:end-k+1);
%     bb = fliplr( aa);
%     ma(k+1,1:end-k+1) = (aa-aa(end)*bb)/(1-aa(end)^2);
% end

% if( all( abs( diag( ma.'))))
%     disp('System je stabilni')
% else
%     disp('System je nestabilni nebo na mezi stability');
% end
% \end{matlab}

% \noindent
% \begin{minipage}{\linewidth}


% %\section{Výpis kódu jazyka C}

% \begin{lstlisting}[frame=single,numbers=right,caption={Příklad implementace první kanonické formy v~jazyce C.},label=lst:priklad.vypis.kodu.C,basicstyle=\ttfamily\small, keywordstyle=\color{black}\bfseries\underbar,]
% // první kanonická forma
% short fxdf2t( short coef[][5], short sample)
% {
% 	static int v1[SECTIONS] = {0,0},v2[SECTIONS] = {0,0};
% 	int x, y, accu;
% 	short k;

% 	x = sample;
% 	for( k = 0; k < SECTIONS; k++){
% 		accu = v1[k] >> 1;
% 		y = _sadd( accu, _smpy( coef[k][0], x));
% 		y = _sshl(y, 1) >> 16;

% 		accu = v2[k] >> 1;
% 		accu = _sadd( accu, _smpy( coef[k][1], x));
% 		accu = _sadd( accu, _smpy( coef[k][2], y));
% 		v1[k] = _sshl( accu, 1);

% 		accu = _smpy( coef[k][3], x);
% 		accu = _sadd( accu, _smpy( coef[k][4], y));
% 		v2[k] = _sshl( accu, 1);

% 		x = y;
% 	}
% 	return( y);
% }
% \end{lstlisting}
% \end{minipage}







% \chapter{Obsah elektronické přílohy}
% Elektronická příloha je často nedílnou součástí semestrální nebo závěrečné práce.
% Vkládá se do informačního systému VUT v~Brně ve vhodném formátu (ZIP, PDF\,\dots).

% Nezapomeňte uvést, co čtenář v~této příloze najde.
% Je vhodné okomentovat obsah každého adresáře, specifikovat, který soubor obsahuje důležitá nastavení, který soubor je určen ke spuštění, uvést nastavení kompilátoru atd.
% Také je dobře napsat, v~jaké verzi software byl kód testován (např.\ Matlab 2018b).
% Pokud bylo cílem práce vytvořit hardwarové zařízení,
% musí elektronická příloha obsahovat veškeré podklady pro výrobu (např.\ soubory s~návrhem DPS v~Eagle).

% Pokud je souborů hodně a jsou organizovány ve více složkách, je možné pro výpis adresářové struktury použít balíček \href{https://www.ctan.org/pkg/dirtree}{\texttt{dirtree}}.

% \bigskip

% {\small
% %
% \dirtree{%.
% .1 /\DTcomment{kořenový adresář přiloženého archivu}.
% .2 logo\DTcomment{loga školy a fakulty}.
% .3 BUT\_abbreviation\_color\_PANTONE\_EN.pdf.
% .3 BUT\_color\_PANTONE\_EN.pdf.
% .3 FEEC\_abbreviation\_color\_PANTONE\_EN.pdf.
% .3 FEKT\_zkratka\_barevne\_PANTONE\_CZ.pdf.
% .3 UTKO\_color\_PANTONE\_CZ.pdf.
% .3 UTKO\_color\_PANTONE\_EN.pdf.
% .3 VUT\_barevne\_PANTONE\_CZ.pdf.
% .3 VUT\_symbol\_barevne\_PANTONE\_CZ.pdf.
% .3 VUT\_zkratka\_barevne\_PANTONE\_CZ.pdf.
% .2 obrazky\DTcomment{ostatní obrázky}.
% .3 soucastky.png.
% .3 spoje.png.
% .3 ZlepseneWilsonovoZrcadloNPN.png.
% .3 ZlepseneWilsonovoZrcadloPNP.png.
% .2 pdf\DTcomment{pdf stránky generované informačním systémem}.
% .3 student-desky.pdf.
% .3 student-titulka.pdf.
% .3 student-zadani.pdf.
% .2 text\DTcomment{zdrojové textové soubory}.
% .3 literatura.tex.
% .3 prilohy.tex.
% .3 reseni.tex.
% .3 uvod.tex.
% .3 vysledky.tex.
% .3 zaver.tex.
% .3 zkratky.tex.
% %.2 navod-sablona\_FEKT.pdf\DTcomment{návod na používání šablony}.
% .2 sablona-obhaj.tex\DTcomment{hlavní soubor pro sazbu prezentace k~obhajobě}.
% %.2 readme.txt\DTcomment{soubor s~popisem obsahu CD}.
% .2 sablona-prace.tex\DTcomment{hlavní soubor pro sazbu kvalifikační práce}.
% .2 thesis.sty\DTcomment{balíček pro sazbu kvalifikačních prací}.
% }
% }
